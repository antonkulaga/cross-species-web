var xValues = ["Bowhead whale liver","Gray whale liver","Minke whale liver","Human liver","Naked mole rat liver","Cow 1 liver","Cow 2 liver","Mouse 1 liver","Mouse 2 liver","Bowhead whale kidney","Gray whale kidney","Minke whale kidney","Human kidney","Naked mole rat kidney","Cow 1 kidney","Cow 2 kidney","Mouse 1 kidney","Mouse 2 kidney"]
  var yValues =  ["DNA repair","positive regulation of DNA repair","nucleotide-excision repair","positive regulation of base-excision repair","negative regulation of DNA repair","global genome nucleotide-excision repair","transcription-coupled nucleotide-excision repair","nucleotide-excision repair, DNA incision, 5'-to lesion","nucleotide-excision repair, DNA incision","nucleotide-excision repair, preincision complex assembly","nucleotide-excision repair, DNA gap filling","nucleotide-excision repair, DNA duplex unwinding","base-excision repair","nucleotide-excision repair, DNA damage recognition","double-strand break repair via homologous recombination","regulation of nucleotide-excision repair","interstrand cross-link repair","protein repair","regulation of DNA repair","mitochondrial DNA repair","DNA dealkylation involved in DNA repair","DNA ligation involved in DNA repair"]
  var zValues =  [[2.19,2.11,2.09,2.82,1.97,2.52,2.52,2.78,2.78,1.78,1.8,1.8,2.28,2.23,2.01,2.03,2.36,2.4],[2.58,2.71,3.07,3.32,2.44,3.25,3.23,3.19,3.14,2.69,2.74,3.13,3.21,2.66,3.14,3.16,3.12,3.21],[2.6,2.9,3.0,3.23,3.1,3.03,3.1,3.24,3.16,2.54,2.92,3.05,3.06,3.1,2.95,2.99,3.13,3.05],[2.66,2.78,3.26,3.8,2.52,2.82,2.83,3.41,3.49,2.83,2.84,3.42,3.81,2.69,2.64,2.82,3.32,3.48],[2.66,2.78,3.26,3.95,2.52,2.82,2.83,3.41,3.49,2.83,2.84,3.42,3.97,2.69,2.65,2.83,3.32,3.48],[2.76,2.4,2.42,2.93,3.11,3.92,3.91,3.96,3.96,2.42,2.45,2.45,2.71,3.11,3.93,3.92,3.97,3.98],[2.83,2.37,2.37,2.89,2.71,3.44,3.49,3.49,3.44,2.45,2.39,2.33,2.52,2.85,3.46,3.46,3.42,3.38],[2.86,2.41,2.44,2.96,3.06,3.56,3.63,3.79,3.79,2.51,2.45,2.47,2.78,3.08,3.62,3.65,3.79,3.76],[2.87,2.41,2.45,2.96,3.13,3.59,3.6,3.69,3.63,2.51,2.45,2.47,2.77,3.12,3.59,3.59,3.67,3.69],[2.89,2.43,2.46,2.97,3.16,3.53,3.56,3.86,3.84,2.55,2.48,2.49,2.77,3.13,3.59,3.62,3.83,3.86],[2.91,2.42,2.45,3.04,3.48,3.82,3.79,3.81,3.8,2.53,2.47,2.49,2.89,3.51,3.8,3.78,3.82,3.77],[2.92,2.43,2.47,2.98,3.16,3.78,3.77,3.82,3.75,2.55,2.48,2.5,2.79,3.13,3.81,3.8,3.84,3.82],[2.92,3.0,2.83,3.38,2.86,3.08,3.08,3.36,3.28,2.72,2.84,2.89,3.34,2.98,2.99,2.96,3.29,3.24],[2.94,2.39,2.48,2.96,2.85,3.3,3.39,3.55,3.51,2.56,2.42,2.5,2.75,2.96,3.54,3.5,3.61,3.59],[2.94,3.13,2.87,3.13,2.47,2.5,2.47,3.19,3.12,2.62,2.94,2.9,2.9,2.7,2.48,2.23,3.07,2.96],[2.95,3.09,3.0,3.9,3.0,3.25,3.22,3.52,3.47,2.91,3.03,3.03,3.83,3.12,3.21,3.14,3.51,3.47],[2.99,2.44,2.49,3.0,3.29,3.23,3.3,3.64,3.61,2.59,2.5,2.53,2.81,3.32,3.27,3.25,3.64,3.56],[3.29,2.96,3.18,3.27,3.18,3.4,3.52,3.55,3.59,3.7,3.22,3.25,3.29,3.59,3.59,3.5,3.62,3.63],[3.45,3.38,3.41,3.7,3.37,3.49,3.51,3.76,3.8,3.57,3.48,3.34,3.69,3.36,3.53,3.55,3.73,3.79],[3.47,3.57,3.55,3.66,3.62,3.69,3.7,3.73,3.72,3.55,3.56,3.57,3.65,3.61,3.69,3.67,3.69,3.7],[3.53,3.39,3.49,3.37,3.48,3.64,3.64,3.66,3.64,3.49,3.43,3.46,3.33,3.48,3.63,3.67,3.66,3.66],[3.61,3.52,3.52,3.43,3.52,3.3,3.26,3.74,3.75,3.6,3.64,3.53,3.44,3.51,3.28,3.21,3.76,3.76]]
  var aValues =  [[154.0,129.0,123.0,659.0,94.0,330.0,328.0,604.0,598.0,60.0,63.0,63.0,190.0,171.0,103.0,106.0,231.0,253.0],[383.0,507.0,1170.0,2100.0,276.0,1790.0,1684.0,1558.0,1365.0,491.0,548.0,1361.0,1618.0,453.0,1385.0,1433.0,1304.0,1605.0],[402.0,789.0,993.0,1680.0,1262.0,1081.0,1257.0,1745.0,1438.0,345.0,825.0,1123.0,1148.0,1271.0,891.0,987.0,1344.0,1124.0],[453.0,607.0,1820.0,6366.0,328.0,660.0,671.0,2546.0,3080.0,682.0,692.0,2653.0,6525.0,493.0,435.0,657.0,2069.0,3023.0],[457.0,607.0,1820.0,8995.0,328.0,666.0,676.0,2561.0,3105.0,682.0,692.0,2653.0,9345.0,493.0,443.0,682.0,2079.0,3049.0],[569.0,253.0,265.0,849.0,1275.0,8326.0,8088.0,9048.0,9119.0,264.0,283.0,284.0,513.0,1295.0,8449.0,8306.0,9433.0,9571.0],[679.0,235.0,234.0,769.0,515.0,2763.0,3102.0,3068.0,2751.0,281.0,243.0,214.0,333.0,710.0,2897.0,2890.0,2609.0,2426.0],[731.0,258.0,278.0,907.0,1160.0,3626.0,4226.0,6118.0,6106.0,320.0,279.0,292.0,597.0,1201.0,4134.0,4450.0,6158.0,5807.0],[738.0,257.0,279.0,913.0,1363.0,3859.0,3965.0,4859.0,4238.0,326.0,280.0,294.0,589.0,1327.0,3902.0,3865.0,4643.0,4925.0],[781.0,268.0,291.0,924.0,1440.0,3365.0,3653.0,7228.0,6857.0,357.0,299.0,309.0,594.0,1363.0,3916.0,4195.0,6703.0,7217.0],[818.0,266.0,284.0,1086.0,3042.0,6538.0,6222.0,6493.0,6265.0,337.0,294.0,307.0,784.0,3260.0,6329.0,6009.0,6555.0,5944.0],[826.0,269.0,295.0,953.0,1440.0,6008.0,5938.0,6680.0,5624.0,357.0,302.0,314.0,622.0,1363.0,6488.0,6300.0,6897.0,6630.0],[830.0,998.0,670.0,2425.0,722.0,1209.0,1208.0,2280.0,1915.0,529.0,699.0,780.0,2164.0,946.0,984.0,918.0,1933.0,1719.0],[869.0,244.0,302.0,906.0,700.0,1988.0,2457.0,3569.0,3241.0,360.0,264.0,319.0,559.0,908.0,3498.0,3140.0,4080.0,3864.0],[871.0,1339.0,740.0,1364.0,298.0,317.0,293.0,1540.0,1305.0,415.0,874.0,787.0,791.0,497.0,300.0,170.0,1175.0,914.0],[898.0,1223.0,991.0,7907.0,996.0,1795.0,1655.0,3305.0,2954.0,811.0,1070.0,1068.0,6700.0,1315.0,1622.0,1367.0,3210.0,2920.0],[977.0,277.0,311.0,999.0,1946.0,1711.0,1973.0,4322.0,4045.0,386.0,318.0,335.0,652.0,2076.0,1863.0,1780.0,4368.0,3671.0],[1962.0,920.0,1531.0,1881.0,1505.0,2520.0,3283.0,3579.0,3903.0,5012.0,1646.0,1793.0,1969.0,3906.0,3859.0,3183.0,4133.0,4248.0],[2796.0,2422.0,2591.0,5059.0,2350.0,3063.0,3214.0,5808.0,6375.0,3754.0,2994.0,2167.0,4889.0,2287.0,3400.0,3581.0,5381.0,6156.0],[2953.0,3757.0,3558.0,4596.0,4156.0,4951.0,5012.0,5341.0,5259.0,3562.0,3612.0,3702.0,4447.0,4099.0,4896.0,4692.0,4908.0,4955.0],[3392.0,2462.0,3066.0,2361.0,2998.0,4383.0,4343.0,4580.0,4375.0,3071.0,2670.0,2878.0,2128.0,3009.0,4315.0,4659.0,4543.0,4616.0],[4055.0,3341.0,3275.0,2699.0,3301.0,2011.0,1818.0,5436.0,5576.0,4009.0,4354.0,3370.0,2764.0,3253.0,1927.0,1604.0,5787.0,5749.0]]

  $(document).ready(function(){
    $('#show_results').click(function(){
      console.log("show results");
      console.log(gridOptions.api.getSelectedRows());
      const layout = {
        // title: 'Heatmap with selected genes and samples',
        annotations: [],
        margin: {
            l: 100,
            r: 100,
            t: 150,
            b: 50
        },
        width: 1000 * xValues.length / 18,
        height: 1000 * yValues.length / 22,
        autosize: true,
        xaxis: {
            side: 'top',
            tickfont: {
                size: 12
            },
            tickangle: '-30'
        },
        yaxis: {
            side: 'left',
            autorange: 'reversed',
            tickfont: {
                size: 12
            }
        },
      };


      for ( var i = 0; i < yValues.length; i++ ) {
          for ( var j = 0; j < xValues.length; j++ ) {
              const currentValue = zValues[i][j];
              if (currentValue != 0.0) {
                  var textColor = 'white';
              }else{
                  var textColor = 'black';
              }
              const result = {
                  xref: 'x1',
                  yref: 'y1',
                  x: xValues[j],
                  y: yValues[i],
                  text: aValues[i][j],
                  font: {
                      family: 'Arial',
                      size: 5,
                      color: 'rgb(50, 171, 96)'
                  },
                  showarrow: false,
                  font: {
                      color: textColor,
                      size: '12'
                  }
              };
              layout.annotations.push(result);
          }
      }

      const data = [{
          x: xValues,
          y: yValues,
          z: zValues,

          colorscale: 'RdBu',
          type: 'heatmap' , reversescale: true
      }];
      Plotly.newPlot('genes_heatmap', data, layout);
      const heatmapElement = document.getElementById("genes_heatmap");
      heatmapElement.scrollIntoView();
      heatmapElement.style = "overflow:scroll;";
    });
  });